<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Detects Windows ≥10."><title>is_windows_10 in clearscreen - Rust</title><script> if (window.location.protocol !== "file:") document.write(`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">`)</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="clearscreen" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0 (9b00956e5 2024-04-29)" data-channel="1.78.0" data-search-js="search-42d8da7a6b9792c2.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="icon" href="https://watchexec.github.io/logo:clearscreen.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../clearscreen/index.html"><img src="https://watchexec.github.io/logo:clearscreen.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../clearscreen/index.html"><img src="https://watchexec.github.io/logo:clearscreen.svg" alt="logo"></a><h2><a href="../clearscreen/index.html">clearscreen</a><span class="version">3.0.0</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../clearscreen/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">clearscreen</a>::<wbr><a class="fn" href="#">is_windows_10</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/clearscreen/lib.rs.html#673-675">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn is_windows_10() -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.78.0/std/primitive.bool.html">bool</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Detects Windows ≥10.</p>
<p>As mentioned in the <a href="enum.ClearScreen.html#variant.WindowsVt" title="variant clearscreen::ClearScreen::WindowsVt"><code>WindowsVt</code></a> documentation, Windows 10 from the
Threshold 2 Update in November 2015 supports the <code>ENABLE_VIRTUAL_TERMINAL_PROCESSING</code> console
mode bit, which enables VT100/ECMA-48 escape sequence processing in the console. This in turn
makes clearing the console vastly easier and is the recommended mode of operation by Microsoft.</p>
<p>However, detecting Windows ≥10 is not trivial. To mitigate broken programs that incorrectly
perform version shimming, Microsoft has deprecated most ways to obtain the version of Windows by
making the relevant APIs <em>lie</em> unless the calling executable <a href="https://docs.microsoft.com/en-us/windows/win32/sysinfo/targeting-your-application-at-windows-8-1">embeds a manifest that explicitely
opts-in to support Windows 10</a>.</p>
<p>To be clear, <strong>this is the proper way to go</strong>, and while this function tries, it may return
false under some Win10s if you don’t manifest. If you are writing an application which uses this
library, or indeed any application targeting Windows at all, you should embed such a manifest
(and take that opportunity to opt-in to long path support, see e.g. <a href="https://github.com/watchexec/watchexec/issues/163">watchexec#163</a>). If you are
writing a library on top of this one, it is your responsibility to communicate this requirement
to your users.</p>
<p>It is important to remark that it is not possible to manifest twice. In plainer words,
<strong>libraries <em>must not</em> embed a manifest</strong> as that will make it impossible for applications which
depend on them to embed their own manifest.</p>
<p>This function tries its best to detect Windows ≥10, and specifically, whether the mentioned mode
bit can be used. Critically, it leaves trying to set the bit as feature detection as a last
resort, such that <em>an error setting the bit</em> is not confunded with <em>the bit not being supported</em>.</p>
<p>Note that this is only provided to write your own clearscreen logic and <em>should not</em> be relied
on for other purposes, as it makes no guarantees of reliable detection, and its internal
behaviour may change without notice. Additionally, this will always return false if the library
was compiled for a non-Windows target, even if e.g. it’s running under WSL in a Windows 10 host.</p>
<p>TL;DR:</p>
<ul>
<li>Runs on Windows ≥10 without manifest and returns <code>true</code>: good, expected behaviour.</li>
<li>Runs on Windows ≥10 without manifest and returns <code>false</code>: <strong>not a bug</strong>, please manifest.</li>
<li>Runs on Windows ≥10 with manifest and returns <code>true</code>: good, expected behaviour.</li>
<li>Runs on Windows ≥10 with manifest and returns <code>false</code>: <strong>is a bug</strong>, please report it.</li>
<li>Runs on Windows &lt;10 and returns <code>true</code>: <strong>is a bug</strong>, please report it. <a href="https://github.com/watchexec/clearscreen/issues/5">ex #5</a></li>
<li>Runs on Windows &lt;10 and returns <code>false</code>: good, expected behaviour.</li>
</ul>
</div></details></section></div></main></body></html>